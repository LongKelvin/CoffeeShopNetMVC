  <!-- Content Header (Page header) -->
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1><strong>Chi tiết đơn hàng</strong></h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a ui-sref="Home">Trang chủ</a></li>
                    <li class="breadcrumb-item "><a ui-sref="Products">Đơn hàng</a></li>
                    <li class="breadcrumb-item active">Chi tiết đơn hàng</li>
                </ol>
            </div>
        </div>
    </div>
</section>

<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <form name="frmUpdateProduct" role="form" ng-submit="UpdateProduct()" novalidate>
            <div class="row">
                <!-- left column -->
                <div class="col-md-6">
                    <!-- general form elements -->
                    <div class="card card-primary">
                        <div class="card-header">
                            <h3 class="card-title">Thông tin đơn hàng</h3>
                        </div>
                        <!-- /.card-header -->
                        <!-- form start -->

                        <div class="card-body">
                            <div class="form-group">
                                <label>Mã đơn hàng <span class="text-danger">*</span> </label>
                                <input type="text" ng-model="product.Name" required name="pName"
                                       class="form-control" placeholder="Tên danh mục ..."
                                       ng-change="getSeoTitle()">
                                <span class="text-danger" ng-show="frmUpdateProduct.pName.$touched && frmUpdateProduct.pName.$invalid">Bạn chưa nhập tên danh mục</span>
                            </div>

                            <div class="form-group">
                                <label>Ngày tạo</label>
                                <input ng-model="product.DisplayOrder" type="number" class="form-control"
                                       placeholder="Hiển thị ở vị trí 1 2 3 ...">
                            </div>

                            <div class="form-group">
                                <label>Tên khách hàng <span class="text-danger">*</span> </label>
                                <input type="text" ng-model="product.Name" required name="pName"
                                       class="form-control" placeholder="Tên danh mục ..."
                                       ng-change="getSeoTitle()">
                                <span class="text-danger" ng-show="frmUpdateProduct.pName.$touched && frmUpdateProduct.pName.$invalid">Bạn chưa nhập tên danh mục</span>
                            </div>
                            <div class="form-group">
                                <label>Trạng thái đơn hàng <span class="text-danger">*</span></label>
                                <input ng-model="product.OriginalPrice" type="number" class="form-control"
                                       name="pOriginalPrice" required
                                       value="0"
                                       placeholder="Giá nhập">
                                <span class="text-danger" ng-show="frmAddproduct.pOriginalPrice.$touched && frmAddproduct.pOriginalPrice.$invalid">Giá sản phẩm là bắt buộc</span>
                            </div>

                        </div>
                        <!-- /.card-body -->
                    </div>

                    <div class="card card-success ">
                        <div class="card-header">
                            <h3 class="card-title">Thông tin Khách hàng</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Tên khách hàng <span class="text-danger">*</span> </label>
                                <input type="text" ng-model="product.Name" required name="pName"
                                       class="form-control" placeholder="Tên danh mục ..."
                                       ng-change="getSeoTitle()">
                                <span class="text-danger" ng-show="frmUpdateProduct.pName.$touched && frmUpdateProduct.pName.$invalid">Bạn chưa nhập tên danh mục</span>
                            </div>
                            <div class="form-group">
                                <label>Số điện thoại <span class="text-danger">*</span> </label>
                                <input type="text" ng-model="product.Name" required name="pName"
                                       class="form-control" placeholder="Tên danh mục ..."
                                       ng-change="getSeoTitle()">
                                <span class="text-danger" ng-show="frmUpdateProduct.pName.$touched && frmUpdateProduct.pName.$invalid">Bạn chưa nhập tên danh mục</span>
                            </div>


                            <div class="form-group">
                                <label>Địa chỉ Email</label>
                                <input ng-model="product.DisplayOrder" type="number" class="form-control"
                                       placeholder="Hiển thị ở vị trí 1 2 3 ...">
                            </div>

                            <div class="form-group">
                                <label>Địa chỉ đặt hàng <span class="text-danger">*</span> </label>
                                <input type="text" ng-model="product.Name" required name="pName"
                                       class="form-control" placeholder="Tên danh mục ..."
                                       ng-change="getSeoTitle()">
                                <span class="text-danger" ng-show="frmUpdateProduct.pName.$touched && frmUpdateProduct.pName.$invalid">Bạn chưa nhập tên danh mục</span>
                            </div>
                            <div class="form-group">
                                <label>Địa chỉ giao hàng <span class="text-danger">*</span></label>
                                <input ng-model="product.OriginalPrice" type="number" class="form-control"
                                       name="pOriginalPrice" required
                                       value="0"
                                       placeholder="Giá nhập">
                                <span class="text-danger" ng-show="frmAddproduct.pOriginalPrice.$touched && frmAddproduct.pOriginalPrice.$invalid">Giá sản phẩm là bắt buộc</span>
                            </div>
                            <div class="form-group">
                                <label>Ghi chú của khách hàng</label>
                                <textarea ng-model="product.Description"
                                          class="form-control" rows="2"
                                          placeholder="Ghi chú"></textarea>
                            </div>

                        </div>
                        <!-- /.card-body -->
                    </div>
                </div>

                <div class="col-md-6">
                    <!-- general form elements disabled -->
                    <div class="card card-lightblue">
                        <div class="card-header">
                            <h3 class="card-title">Thông tin Hóa đơn</h3>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Tổng giá trị đơn hàng <span class="text-danger">*</span></label>
                                        <input type="text" ng-model="product.Alias" class="form-control" placeholder="Tiêu đề SEO ..." name="pAlias" required>
                                        <span class="text-danger" ng-show="frmUpdateProduct.pAlias.$touched && frmUpdateProduct.pAlias.$invalid">Bạn chưa nhập tiêu đề SEO</span>
                                    </div>
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label>Phí vận chuyển</label>
                                        <input ng-model="product.MetaKeyword"
                                               type="text" class="form-control"
                                               placeholder="Chọn vài từ để làm từ khóa ...">
                                    </div>
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label>Thuế</label>
                                        <input ng-model="product.MetaDescription"
                                               type="text" class="form-control"
                                               placeholder="Từ khóa mô tả về danh mục ...">
                                    </div>
                                    <div class="form-group">
                                        <label>Giảm giá</label>
                                        <input ng-model="product.TagsString"
                                               type="text" class="form-control"
                                               placeholder="Tags liên quan ...">
                                    </div>
                                    <div class="form-group">
                                        <label>Tổng số tiền phải trả</label>
                                        <input ng-model="product.TagsString"
                                               type="text" class="form-control"
                                               placeholder="Tags liên quan ...">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.card-body -->
                    </div>


                    <div class="card card-cyan ">
                        <div class="card-header">
                            <h3 class="card-title">Trạng thái đơn hàng</h3>
                        </div>
                        <div class="card-body">

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <label>Trạng thái đơn hàng <span class="text-danger">*</span></label>
                                        <input type="text" ng-model="product.Alias" class="form-control" placeholder="Tiêu đề SEO ..." name="pAlias" required>
                                        <span class="text-danger" ng-show="frmUpdateProduct.pAlias.$touched && frmUpdateProduct.pAlias.$invalid">Bạn chưa nhập tiêu đề SEO</span>
                                    </div>
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label>Trạng thái vận chuyển</label>
                                        <input ng-model="product.MetaKeyword"
                                               type="text" class="form-control"
                                               placeholder="Chọn vài từ để làm từ khóa ...">
                                    </div>
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label>Trạng thái thanh toán</label>
                                        <input ng-model="product.MetaDescription"
                                               type="text" class="form-control"
                                               placeholder="Từ khóa mô tả về danh mục ...">
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- general form elements disabled -->

                </div>
                <!--/.col (right) -->
            </div>


            <div class="card card-dark mb-5">
                <div class="card-header">
                    <h3 class="card-title">Chi tiết đơn hàng</h3>
                </div>
                <!--/.card-header-->
                <div class="card-body">

                    <table class="table">
                        <thead>
                            <tr>
                                <th class="selectedItem" style="width: 10px">
                                    Chọn
                                </th>
                                <th style="width: 10px">
                                    STT
                                </th>
                                <th style="width: 10%">Hình ảnh</th>
                                <th class="optional-sm" style="width: 10%">Tên sản phẩm</th>
                                <th style="width: 10%">Giá</th>
                                <th style="width: 10%">Số lượng</th>
                                <th style="width: 15%">Giảm giá</th>
                                <th class="optional-sm" style="width: 10%">Tổng tiền</th>
                                <th style="width: 15%">Thao tác</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in orders">

                                <td>
                                    <input type="checkbox" class="checkBox"
                                           value="{{item.ID}}" onclick="GetTotalSelectedItems()" />
                                </td>
                                <td>{{$index+1}}</td>
                                <td>{{item.ID}}</td>
                                <td>
                                    <span ng-class="getOrderStatusStyle({{item.OrderStatus}})" style="font-size:14px; color:white">
                                        {{item.OrderStatus | orderStatusFilter}}
                                    </span>
                                </td>

                                <td style="color:white">
                                    <span ng-class="getPaymentStatusStyle({{item.PaymentStatus}})" style="font-size:14px; color:white">
                                        {{item.PaymentStatus | paymentStatusFilter}}
                                    </span>
                                </td>

                                <td>
                                    <span ng-class="getShippingStatusStyle({{item.ShippingStatus}})" style="font-size:14px; color:white">
                                        {{item.ShippingStatus | shippingStatusFilter}}
                                    </span>
                                </td>

                                <td>
                                    <a href="mailto:{{item.CustomerEmail}}"> {{item.CustomerEmail}}</a>
                                </td>
                                <td class="optional-sm">
                                    {{item.CreatedDate | date:'dd/MM/yyyy'}}
                                </td>
                                <td><strong>{{item.TotalAmount | currency:'₫':0}}</strong></td>

                                <td>
                                    <button ui-sref="OrderDetail({id:item.ID})" class="btn btn-sm btn-outline-primary"><i class="fa fa-eye"></i></button>
                                    <button ui-sref="OrderEdit({id:item.ID})" class="btn btn-sm btn-outline-primary"><i class="fa fa-pencil"></i></button>
                                    <button ng-click="showDeleteDialog(item.ID)" class="btn  btn-sm btn-outline-danger"><i class="fa fa-trash"></i></button>
                                </td>
                                <td>
                                    <button ng-if="item.OrderStatus == 0" ng-click="showOrderUpdateConfirmStatusModal(item.ID)" type="button" class="btn btn-outline-success btn-sm">
                                        Xác nhận
                                    </button>
                                    <button ng-if="item.OrderStatus == 1 || item.OrderStatus == 2 || item.OrderStatus == 3" ng-click="showOrderUpdateStatusModal(item.ID)" type="button" class="btn btn-primary btn-sm">
                                        Cập nhật
                                    </button>
                                </td>
                                <td>
                                    <button ng-click="createInvoice(item.ID)" class="btn  btn-sm btn-outline-success"><i class="fa fa-download"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--/.card-body-->
            </div>

            <div class="card-footer mb-5">
                <button type="submit" ng-disabled="frmUpdateProduct.$invalid" class="btn btn-primary">Cập nhật đơn hàng</button>
                <button ui-sref="Products" class="btn btn-outline-secondary space-around">Hủy bỏ</button>
            </div>
        </form>

        <!-- /.row -->
    </div><!-- /.container-fluid -->
</section>
<!-- /.content -->

<script>

    $(document).ready(function () {
        //$('#categoryIdDropdown').select2({
        //    theme: 'bootstrap4'
        //});

        //$('#categoryIdDropdown').val('Chọn danh mục'); // Select the option with a default value
        //$('#categoryIdDropdown').trigger('change'); // Notify any JS components that the value changed

        //var editor = CKEDITOR.replace('ckEditorContent');
        CKEDITOR.replace('ckEditorContentEdit', {
            filebrowserBrowseUrl: '/Assets/Admin/lib/ckfinder/ckfinder.html',
            filebrowserImageBrowseUrl: '/Assets/Admin/lib/ckfinder/ckfinder.html?Type=Images',
            filebrowserUploadUrl: '/Assets/Admin/lib/ckfinder/core/connector//aspx/connector.aspx?command=QuickUpload&type=Files',
            filebrowserImageUploadUrl: '/Assets/Admin/lib/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Images',

            filebrowserWindowHeight: '1000',
            filebrowserWindowWidth: '1000'
        });

        //var editor = $('#ckEditorContent');
        //CKFinder.setupCKEditor(editor, '/Assets/Admin/lib/ckfinder/');
    });
</script>